<!DOCTYPE html>
<html lang="tg">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DIY Bluetooth Mouse with ESP32+MPU6050</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .image-container {
      text-align: center;
      margin-bottom: 30px;
    }
    .image-container img {
      width: 60%;
      max-width: 500px;
      border-radius: 10px;
    }
    pre {
      background-color: #1b1b1b;
      color: #f1f1f1;
      padding: 20px;
      border-radius: 10px;
      overflow-x: auto;
    }
    h3 {
      margin-top: 30px;
      color: #000000;
    }
  </style>
  <link rel="icon" href="favicon.jpg" type="image/png">
</head>
<body>

  
  <div class="image-container">
    <img src="photo14.jpg" alt="photo">
  </div>

  <h2>
    DIY Bluetooth Mouse with ESP32+MPU6050
</h2>

  <h3>Code for ESP32 Platformio</h3>
  <pre>
#include <Arduino.h>
#include <Wire.h>
#include <Adafruit_MPU6050.h>
#include <Adafruit_Sensor.h>
#include <BleMouse.h>

Adafruit_MPU6050 mpu;
BleMouse bleMouse("ESP32-Gyro-Mouse");

// buttons
#define BTN_LEFT  32
#define BTN_RIGHT 33

// settings
#define DEADZONE 0.12
#define SPEED    3

void setup() {
  Serial.begin(115200);

  pinMode(BTN_LEFT, INPUT_PULLUP);
  pinMode(BTN_RIGHT, INPUT_PULLUP);

  Wire.begin(21, 22);

  if (!mpu.begin()) {
    Serial.println("MPU6050 not found!");
    while (1) delay(10);
  }

  mpu.setAccelerometerRange(MPU6050_RANGE_4_G);
  mpu.setFilterBandwidth(MPU6050_BAND_21_HZ);

  bleMouse.begin();
  Serial.println("BLE Mouse started");
}

void loop() {
  if (!bleMouse.isConnected()) {
    delay(20);
    return;
  }

  sensors_event_t a, g, temp;
  mpu.getEvent(&a, &g, &temp);

  int moveX = 0;
  int moveY = 0;

  // LEFT / RIGHT movement
  if (abs(a.acceleration.x) > DEADZONE) {
    moveX = a.acceleration.x * SPEED;
  }

  // UP / DOWN movement
  if (abs(a.acceleration.y) > DEADZONE) {
    moveY = -a.acceleration.y * SPEED; // inverted for screen direction
  }

  // move the mouse
  if (moveX != 0 || moveY != 0) {
    bleMouse.move(moveX, moveY);
  }

  // ===== BUTTONS â†’ DRAG & DROP =====

  // LEFT BUTTON
  if (digitalRead(BTN_LEFT) == LOW) {
    bleMouse.press(MOUSE_LEFT);    // hold = drag
  } else {
    bleMouse.release(MOUSE_LEFT);  // release
  }

  // RIGHT BUTTON
  if (digitalRead(BTN_RIGHT) == LOW) {
    bleMouse.press(MOUSE_RIGHT);
  } else {
    bleMouse.release(MOUSE_RIGHT);
  }

  delay(10);
}
  </pre>
  
   <h3>platformio.ini</h3>
  <pre>
    [env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200

lib_deps =
    adafruit/Adafruit MPU6050
    adafruit/Adafruit Unified Sensor
    h2zero/BleMouse
    </pre>
  
  <h3>Code for esp32 Arduino IDE</h3>
  <pre>
    #include <Arduino.h>
#include <Wire.h>
#include <Adafruit_MPU6050.h>
#include <Adafruit_Sensor.h>
#include <BleMouse.h>

Adafruit_MPU6050 mpu;
BleMouse bleMouse("ESP32-Gyro-Mouse");

// buttons
#define BTN_LEFT  32
#define BTN_RIGHT 33

// settings
#define DEADZONE 0.12
#define SPEED    3

void setup() {
  Serial.begin(115200);

  pinMode(BTN_LEFT, INPUT_PULLUP);
  pinMode(BTN_RIGHT, INPUT_PULLUP);

  Wire.begin(21, 22);

  if (!mpu.begin()) {
    Serial.println("MPU6050 not found!");
    while (1) delay(10);
  }

  mpu.setAccelerometerRange(MPU6050_RANGE_4_G);
  mpu.setFilterBandwidth(MPU6050_BAND_21_HZ);

  bleMouse.begin();
  Serial.println("BLE Mouse started");
}

void loop() {
  if (!bleMouse.isConnected()) {
    delay(20);
    return;
  }

  sensors_event_t a, g, temp;
  mpu.getEvent(&a, &g, &temp);

  int moveX = 0;
  int moveY = 0;

  // LEFT / RIGHT
  if (abs(a.acceleration.x) > DEADZONE) {
    moveX = a.acceleration.x * SPEED;
  }

  // UP / DOWN
  if (abs(a.acceleration.y) > DEADZONE) {
    moveY = -a.acceleration.y * SPEED;
  }

  if (moveX != 0 || moveY != 0) {
    bleMouse.move(moveX, moveY);
  }

  // LEFT CLICK (drag)
  if (digitalRead(BTN_LEFT) == LOW) {
    bleMouse.press(MOUSE_LEFT);
  } else {
    bleMouse.release(MOUSE_LEFT);
  }

  // RIGHT CLICK
  if (digitalRead(BTN_RIGHT) == LOW) {
    bleMouse.press(MOUSE_RIGHT);
  } else {
    bleMouse.release(MOUSE_RIGHT);
  }

  delay(10);
}
    </pre>
